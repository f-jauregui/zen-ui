import { html } from 'lit-html';
import { Meta, Description, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';
import { faTimes, faTrashAlt, faPlus, faFilter, faCheck } from '@fortawesome/pro-light-svg-icons';
import { waitForElement } from '../../../.storybook/helpers/utils';
import { getArgTypesAndArgs, getDefaultArgs, getComponentData, spreadArgs } from '../../../.storybook/helpers/argTypes';
const { argTypes } = getArgTypesAndArgs('zen-popover');

<Meta title="In progress/Popover" component="zen-popover" argTypes={argTypes} />

export const StoryWithControls = args => {
  waitForElement('#control', element => {
    element.offset = args.offset;
  });
  return html/*html*/ `
    <zen-space no-wrap horizontal-align="center" vertical-align="center" style="height: 200px;">
      <zen-popover id="control" ...="${spreadArgs(args, argTypes)}">
        <zen-button variant="primary" slot="target"> Button </zen-button>
        <zen-card style="background: white; padding: 1rem; width:200px; text-align: center;">
          <zen-text size="sm">Lorem Ipsum is simply dummy text of the printing and typesetting industry.</zen-text>
        </zen-card>
      </zen-popover>
    </zen-space>
  `;
};

export const StoryPositionVariants = args => {
  return html/*html*/ `
    <zen-space no-wrap spacing="xl" horizontal-align="space-around">
      <zen-space vertical-align="start" style="height: 200px; width:100%; position: relative;">
        <zen-popover position="bottom-start" always-visible>
          <zen-button variant="primary" slot="target"> Position bottom start </zen-button>
          <zen-card style="background: white; padding: 1rem; width:120px;">
            <zen-text size="sm">Lorem Ipsum is simply dummy text of the printing and typesetting industry.</zen-text>
          </zen-card>
        </zen-popover>
        <zen-popover position="bottom-end" always-visible style="position:absolute; right:0;">
          <zen-button variant="primary" slot="target"> Position bottom end </zen-button>
          <zen-card style="background: white; padding: 1rem; width: 120px;">
            <zen-text size="sm">Lorem Ipsum is simply dummy text of the printing and typesetting industry.</zen-text>
          </zen-card>
        </zen-popover>
      </zen-space>
      <zen-space vertical-align="end" style="height: 200px; width:100%; position: relative;">
        <zen-popover position="top-start" always-visible>
          <zen-button variant="primary" slot="target"> Position top start </zen-button>
          <zen-card style="background: white; padding: 1rem; width:120px;">
            <zen-text size="sm">Lorem Ipsum is simply dummy text of the printing and typesetting industry.</zen-text>
          </zen-card>
        </zen-popover>
        <zen-popover position="top-end" always-visible style="position:absolute; right:0;">
          <zen-button variant="primary" slot="target"> Position top ends </zen-button>
          <zen-card style="background: white; padding: 1rem; width:120px; text-align: center;">
            <zen-text size="sm">Lorem Ipsum is simply dummy text of the printing and typesetting industry.</zen-text>
          </zen-card>
        </zen-popover>
      </zen-space>
    </zen-space>
  `;
};

export const StoryTriggerEvents = args => {
  return html/*html*/ `
    <zen-space no-wrap horizontal-align="space-evenly" vertical-align="start" style="height: 150px">
      <zen-popover position="bottom-start">
        <zen-button slot="target" variant="primary"> Click Event </zen-button>
        <zen-card style="background: white; padding: 1rem; width:200px; max-height:150px;">
          <zen-text size="sm">Lorem Ipsum is simply dummy text of the printing and typesetting industry.</zen-text>
        </zen-card>
      </zen-popover>
      <zen-popover position="bottom-start" trigger-event="hover">
        <zen-button slot="target" variant="primary"> Hover Event </zen-button>
        <zen-card style="background: white; padding: 1rem; width:200px; max-height:150px;">
          <zen-text size="sm">Lorem Ipsum is simply dummy text of the printing and typesetting industry.</zen-text>
        </zen-card>
      </zen-popover>
    </zen-space>
  `;
};

export const StoryScrollable = args => {
  return html/*html*/ `
    <div style="height:200px">
      <zen-space no-wrap padding="none" horizontal-align="center" vertical-align="center" style="height: 500px;">
        <zen-button variant="primary"> Top Start </zen-button>
        <zen-popover position="bottom-end" always-visible>
          <zen-card style="background: white; padding: 1rem; width:200px; ">
            <zen-text size="sm"
              >Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum is simply dummy
              text of the printing and typesetting industry. Lorem Ipsum is simply dummy text of the printing and
              typesetting industry. Lorem Ipsum is simply dummy text of the printing and typesetting industry.</zen-text
            >
          </zen-card>
        </zen-popover>
      </zen-space>
    </div>
  `;
};

export const StoryFilters = args => {
  waitForElement('#filter', element => {
    element.icon = faFilter;
  });
  waitForElement('#cross', element => {
    element.icon = faTimes;
  });
  waitForElement('#check', element => {
    element.icon = faCheck;
  });
  waitForElement('#trash', element => {
    element.icon = faTrashAlt;
  });
  waitForElement('#plus', element => {
    element.icon = faPlus;
  });
  waitForElement('#cross2', element => {
    element.icon = faTimes;
  });
  waitForElement('#trash2', element => {
    element.icon = faTrashAlt;
  });
  waitForElement('#plus2', element => {
    element.icon = faPlus;
  });
  return html/*html*/ `
    <zen-space no-wrap spacing="lg" horizontal-align="start" vertical-align="top" style="height: 400px">
      <zen-popover position="bottom-start">
        <zen-button variant="primary" slot="target">
          <zen-icon slot="leadingIcon" id="filter" style="height:14px; align-self:center;"></zen-icon>
          Filter
        </zen-button>
        <zen-card style="background: white;">
          <zen-space horizontal-align="start" padding="lg">
            <zen-text size="xs" variant="heading">Filters</zen-text>
          </zen-space>
          <zen-space no-wrap="true" spacing="md" padding="lg">
            <!-- query row button -->
            <zen-icon id="check" style="color:#34835B"></zen-icon>
            <!-- attribute name -->
            <zen-dropdown placeholder="Attribute/mapping" style="width: 192px;">
              <zen-option value="1">Title</zen-option>
              <zen-option value="2">Description</zen-option>
              <zen-option value="3">Status</zen-option>
              <zen-option value="4">Start Date</zen-option>
            </zen-dropdown>
            <!-- comparator -->
            <zen-dropdown placeholder="Select" style="width: 192px;">
              <zen-option value="1">Contains</zen-option>
              <zen-option value="2">Does not Contain</zen-option>
              <zen-option value="3">Equals</zen-option>
              <zen-option value="4">Does not Equal</zen-option>
            </zen-dropdown>
            <!-- value -->
            <zen-input style="width: 192px;height: 35px;"></zen-input>
            <!-- add group filter -->
            <zen-button variant="tertiary">
              <zen-icon id="plus" slot="leadingIcon"></zen-icon>
            </zen-button>
            <!-- remove filter -->
            <zen-button variant="tertiary">
              <zen-icon id="trash" slot="leadingIcon"></zen-icon>
            </zen-button>
          </zen-space>
          <zen-space no-wrap="true" spacing="md" padding="lg">
            <!-- query row button -->
            <zen-icon id="cross2"></zen-icon>
            <!-- attribute name -->
            <zen-dropdown placeholder="Attribute/mapping" style="width: 192px;">
              <zen-option value="1">Title</zen-option>
              <zen-option value="2">Description</zen-option>
              <zen-option value="3">Status</zen-option>
              <zen-option value="4">Start Date</zen-option>
            </zen-dropdown>
            <!-- comparator -->
            <zen-dropdown placeholder="Select" disabled="true" style="width: 192px;">
              <zen-option value="1">Contains</zen-option>
              <zen-option value="2">Does not Contain</zen-option>
              <zen-option value="3">Equals</zen-option>
              <zen-option value="4">Does not Equal</zen-option>
            </zen-dropdown>
            <!-- value -->
            <zen-input disabled="true" style="width: 192px;height: 35px;"></zen-input>
            <!-- add group filter -->
            <zen-button variant="tertiary">
              <zen-icon id="plus2" slot="leadingIcon"></zen-icon>
            </zen-button>
            <!-- remove filter -->
            <zen-button variant="tertiary">
              <zen-icon id="trash2" slot="leadingIcon"></zen-icon>
            </zen-button>
          </zen-space>
          <zen-space padding="lg">
            <zen-button variant="secondary"> + Add new </zen-button>
          </zen-space>
          <zen-divider style="margin-bottom: 0"></zen-divider>
          <zen-space no-wrap="true" spacing="md" padding="lg" horizontal-align="end">
            <zen-button variant="primary"> Apply Filter </zen-button>
          </zen-space>
        </zen-card>
      </zen-popover>
    </zen-space>
  `;
};

# Zen Popover

Popover component

## Component previews

<br />

### 1. Position variants

Use attribute placement to set default side of trigger element on which popover will be showed.

<Canvas>
  <Story name="StoryPositionVariants">{StoryPositionVariants.bind({})}</Story>
</Canvas>

### 2. Different trigger events

Use trigger event to set what should trigger popover to show. (click, hover).

<Canvas>
  <Story name="StoryTriggerEvents">{StoryTriggerEvents.bind({})}</Story>
</Canvas>

### 3. Changes in popover position

Popover should automatically adjust position if it has no space.

<Canvas>
  <Story name="StoryScrollable">{StoryScrollable.bind({})}</Story>
</Canvas>

### 4. Popover with complex component

You can add complex build components to the default slot.

<Canvas>
  <Story name="StoryFilters">{StoryFilters.bind({})}</Story>
</Canvas>

## Properties

<Canvas>
  <Story
    name="default"
    args={{
      ...getDefaultArgs(argTypes),
      position: 'bottom-start',
      offset: { x: 0, y: 8 },
    }}
  >
    {StoryWithControls.bind({})}
  </Story>
</Canvas>

<ArgsTable story="default" />

<docs-table docs={JSON.stringify(getComponentData('zen-popover'))}></docs-table>
