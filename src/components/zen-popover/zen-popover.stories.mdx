import { html } from 'lit-html';
import { Meta, Description, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks';
import { faTimes, faTrashAlt, faPlus, faFilter, faCheck } from '@fortawesome/pro-light-svg-icons';
import { waitForElement } from '../../../.storybook/helpers/utils';
import { getArgTypesAndArgs, getDefaultArgs, getComponentData, spreadArgs } from '../../../.storybook/helpers/argTypes';
const { argTypes } = getArgTypesAndArgs('zen-popover');

<Meta title="In progress/Popover" component="zen-popover" argTypes={argTypes} />

export const StoryWithControls = args => {
  waitForElement('#control', element => {
    element.offset = args.offset;
  });
  return html/*html*/ `
    <sb-zen-space no-wrap horizontal-align="center" vertical-align="center" style="height: 200px;">
      <sb-zen-button variant="primary"> Button </sb-zen-button>
      <sb-zen-popover id="control" ...="${spreadArgs(args, argTypes)}">
        <sb-zen-space padding="md">
          <sb-zen-text size="sm"
            >Lorem Ipsum is simply dummy text of the printing and typesetting industry.</sb-zen-text
          >
        </sb-zen-space>
      </sb-zen-popover>
    </sb-zen-space>
  `;
};

export const StoryPositionVariants = args => {
  return html/*html*/ `
    <sb-zen-space no-wrap padding="xl" spacing="sm" horizontal-align="center" vertical-align="center">
      <sb-zen-button variant="primary">left</sb-zen-button>
      <sb-zen-popover position="left" always-visible style="max-width: 120px">
        <sb-zen-space padding="md">
          <sb-zen-text size="sm"
            >Lorem Ipsum is simply dummy text of the printing and typesetting industry.</sb-zen-text
          >
        </sb-zen-space>
      </sb-zen-popover>
      <sb-zen-button variant="primary">bottom-start</sb-zen-button>
      <sb-zen-popover position="bottom-start" always-visible>
        <sb-zen-space padding="md">
          <sb-zen-text size="sm"
            >Lorem Ipsum is simply dummy text of the printing and typesetting industry.</sb-zen-text
          >
        </sb-zen-space>
      </sb-zen-popover>
      <sb-zen-button variant="primary">bottom-end</sb-zen-button>
      <sb-zen-popover position="bottom-end" always-visible style="position:absolute; right:0;">
        <sb-zen-space padding="md">
          <sb-zen-text size="sm"
            >Lorem Ipsum is simply dummy text of the printing and typesetting industry.</sb-zen-text
          >
        </sb-zen-space>
      </sb-zen-popover>
      <sb-zen-button variant="primary">top-start</sb-zen-button>
      <sb-zen-popover position="top-start" always-visible>
        <sb-zen-space padding="md">
          <sb-zen-text size="sm"
            >Lorem Ipsum is simply dummy text of the printing and typesetting industry.</sb-zen-text
          >
        </sb-zen-space>
      </sb-zen-popover>
      <sb-zen-button variant="primary">top-end</sb-zen-button>
      <sb-zen-popover position="top-end" always-visible style="position:absolute; right:0;">
        <sb-zen-space padding="md">
          <sb-zen-text size="sm"
            >Lorem Ipsum is simply dummy text of the printing and typesetting industry.</sb-zen-text
          >
        </sb-zen-space>
      </sb-zen-popover>
      <sb-zen-button variant="primary">right</sb-zen-button>
      <sb-zen-popover position="right" always-visible style="max-width: 120px">
        <sb-zen-space padding="md">
          <sb-zen-text size="sm"
            >Lorem Ipsum is simply dummy text of the printing and typesetting industry.</sb-zen-text
          >
        </sb-zen-space>
      </sb-zen-popover>
    </sb-zen-space>
  `;
};

export const StoryTriggerEvents = args => {
  return html/*html*/ `
    <sb-zen-space no-wrap horizontal-align="space-evenly" vertical-align="start" style="height: 90px">
      <sb-zen-button variant="primary"> Click Event </sb-zen-button>
      <sb-zen-popover>
        <sb-zen-space padding="md">
          <sb-zen-text size="sm"
            >Lorem Ipsum is simply dummy text of the printing and typesetting industry.</sb-zen-text
          >
        </sb-zen-space>
      </sb-zen-popover>
      <sb-zen-button variant="primary"> Hover Event </sb-zen-button>
      <sb-zen-popover trigger-event="hover">
        <sb-zen-space padding="md">
          <sb-zen-text size="sm"
            >Lorem Ipsum is simply dummy text of the printing and typesetting industry.</sb-zen-text
          >
        </sb-zen-space>
      </sb-zen-popover>
    </sb-zen-space>
  `;
};

export const StoryScrollable = args => {
  return html/*html*/ `
    <div style="height: 200px">
      <sb-zen-space no-wrap padding="none" horizontal-align="center" vertical-align="center" style="height: 400px;">
        <sb-zen-button variant="primary"> Top Start </sb-zen-button>
        <sb-zen-popover position="bottom-end" always-visible>
          <sb-zen-space padding="md">
            <sb-zen-text size="sm"
              >Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum is simply dummy
              text of the printing and typesetting industry. Lorem Ipsum is simply dummy text of the printing and
              typesetting industry. Lorem Ipsum is simply dummy text of the printing and typesetting
              industry.</sb-zen-text
            >
          </sb-zen-space>
        </sb-zen-popover>
      </sb-zen-space>
    </div>
  `;
};

export const StoryFilters = args => {
  waitForElement('#filter', element => {
    element.icon = faFilter;
  });
  waitForElement('#cross', element => {
    element.icon = faTimes;
  });
  waitForElement('#check', element => {
    element.icon = faCheck;
  });
  waitForElement('#trash', element => {
    element.icon = faTrashAlt;
  });
  waitForElement('#plus', element => {
    element.icon = faPlus;
  });
  waitForElement('#cross2', element => {
    element.icon = faTimes;
  });
  waitForElement('#trash2', element => {
    element.icon = faTrashAlt;
  });
  waitForElement('#plus2', element => {
    element.icon = faPlus;
  });
  return html/*html*/ `
    <sb-zen-space no-wrap spacing="lg" horizontal-align="start" vertical-align="top" style="height: 400px">
      <sb-zen-button variant="primary">
        <sb-zen-icon slot="leadingIcon" id="filter" style="height:14px; align-self:center;"></sb-zen-icon>
        Filter
      </sb-zen-button>
      <sb-zen-popover position="bottom-start">
        <sb-zen-space padding="md">
          <sb-zen-space horizontal-align="start" padding="lg">
            <sb-zen-text size="xs" variant="heading">Filters</sb-zen-text>
          </sb-zen-space>
          <sb-zen-space no-wrap="true" spacing="md" padding="lg">
            <!-- query row button -->
            <sb-zen-icon id="check" style="color:#34835B"></sb-zen-icon>
            <!-- attribute name -->
            <sb-zen-dropdown placeholder="Attribute/mapping" style="width: 192px;">
              <sb-zen-option value="1">Title</sb-zen-option>
              <sb-zen-option value="2">Description</sb-zen-option>
              <sb-zen-option value="3">Status</sb-zen-option>
              <sb-zen-option value="4">Start Date</sb-zen-option>
            </sb-zen-dropdown>
            <!-- comparator -->
            <sb-zen-dropdown placeholder="Select" style="width: 192px;">
              <sb-zen-option value="1">Contains</sb-zen-option>
              <sb-zen-option value="2">Does not Contain</sb-zen-option>
              <sb-zen-option value="3">Equals</sb-zen-option>
              <sb-zen-option value="4">Does not Equal</sb-zen-option>
            </sb-zen-dropdown>
            <!-- value -->
            <sb-zen-input style="width: 192px;height: 35px;"></sb-zen-input>
            <!-- add group filter -->
            <sb-zen-button variant="tertiary">
              <sb-zen-icon id="plus" slot="leadingIcon"></sb-zen-icon>
            </sb-zen-button>
            <!-- remove filter -->
            <sb-zen-button variant="tertiary">
              <sb-zen-icon id="trash" slot="leadingIcon"></sb-zen-icon>
            </sb-zen-button>
          </sb-zen-space>
          <sb-zen-space no-wrap="true" spacing="md" padding="lg">
            <!-- query row button -->
            <sb-zen-icon id="cross2"></sb-zen-icon>
            <!-- attribute name -->
            <sb-zen-dropdown placeholder="Attribute/mapping" style="width: 192px;">
              <sb-zen-option value="1">Title</sb-zen-option>
              <sb-zen-option value="2">Description</sb-zen-option>
              <sb-zen-option value="3">Status</sb-zen-option>
              <sb-zen-option value="4">Start Date</sb-zen-option>
            </sb-zen-dropdown>
            <!-- comparator -->
            <sb-zen-dropdown placeholder="Select" disabled="true" style="width: 192px;">
              <sb-zen-option value="1">Contains</sb-zen-option>
              <sb-zen-option value="2">Does not Contain</sb-zen-option>
              <sb-zen-option value="3">Equals</sb-zen-option>
              <sb-zen-option value="4">Does not Equal</sb-zen-option>
            </sb-zen-dropdown>
            <!-- value -->
            <sb-zen-input disabled="true" style="width: 192px;height: 35px;"></sb-zen-input>
            <!-- add group filter -->
            <sb-zen-button variant="tertiary">
              <sb-zen-icon id="plus2" slot="leadingIcon"></sb-zen-icon>
            </sb-zen-button>
            <!-- remove filter -->
            <sb-zen-button variant="tertiary">
              <sb-zen-icon id="trash2" slot="leadingIcon"></sb-zen-icon>
            </sb-zen-button>
          </sb-zen-space>
          <sb-zen-space padding="md">
            <sb-zen-button variant="secondary"> + Add new </sb-zen-button>
          </sb-zen-space>
          <sb-zen-divider style="margin-bottom: 0"></sb-zen-divider>
          <sb-zen-space no-wrap="true" spacing="md" padding="lg" horizontal-align="end">
            <sb-zen-button variant="primary"> Apply Filter </sb-zen-button>
          </sb-zen-space>
        </sb-zen-space>
      </sb-zen-popover>
    </sb-zen-space>
  `;
};

# Zen Popover

Popover component

## Component previews

<br />

### 1. Position variants

Use attribute placement to set default side of trigger element on which popover will be showed.

<Canvas>
  <Story name="StoryPositionVariants">{StoryPositionVariants.bind({})}</Story>
</Canvas>

### 2. Trigger events

Use trigger event to set what should trigger popover to show. (click, hover).

<Canvas>
  <Story name="StoryTriggerEvents">{StoryTriggerEvents.bind({})}</Story>
</Canvas>

### 3. Flipping

Scroll the container (or the whole page) to see the popper flip to the opposite side once it's about to overflow the visible area. Once enough space is detected on its preferred side, it will flip back.

<Canvas>
  <Story name="StoryScrollable">{StoryScrollable.bind({})}</Story>
</Canvas>

### 4. Popover with complex component

You can add complex build components to the default slot.

<Canvas>
  <Story name="StoryFilters">{StoryFilters.bind({})}</Story>
</Canvas>

## Properties

<Canvas>
  <Story
    name="default"
    args={{
      ...getDefaultArgs(argTypes),
      position: 'bottom-start',
      offset: { x: 0, y: 8 },
    }}
  >
    {StoryWithControls.bind({})}
  </Story>
</Canvas>

<ArgsTable story="default" />

<docs-table docs={JSON.stringify(getComponentData('zen-popover'))}></docs-table>
